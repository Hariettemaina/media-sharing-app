<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Media Sharing Dashboard</title>
    <link rel="stylesheet" href="dash.css" />
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js@1/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js@1/src/toastify.min.js"></script> -->

</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Upload</a></li>
                <!-- <li><a href="profile.html">Profile</a></li> -->
                <li><a href="#" id="logoutButton">Logout</a></li>
            </ul>
        </nav>
        <div id="welcome-message"></div>
    </header>

    <main>
        <section id="upload-section">
            <h2>Upload Media</h2>
            <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
                <input id="file-input" type="file" name="media" accept="image/*" required />
                <button type="submit">Upload</button>
            </form>
        </section>

        <section id="media-section">
            <h2>Your Media</h2>
            <div class="media-grid"></div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Media Sharing App</p>
    </footer>

    <script src="scripts.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const userId = localStorage.getItem("userId");
            const userName = localStorage.getItem("userName");

            console.log("Retrieved userId:", userId); // Debugging line
            console.log("Retrieved userName:", userName); // Debugging line

            if (!userId) {
                window.location.href = "login.html";
            } else {
                document.getElementById("welcome-message").innerText = `Welcome, ${userName}`;
            }

            document.getElementById("logoutButton").addEventListener("click", function () {
                localStorage.removeItem('userId');
                localStorage.removeItem('userName');
                alert('You have been logged out.');
                window.location.href = 'login.html';
            });
        });
    </script>
</body>
</html>
